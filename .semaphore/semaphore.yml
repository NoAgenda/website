version: v1.0
name: No Agenda
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: No Agenda
    task:
      jobs:
        - name: Unit Tests
          commands:
            - checkout
            - docker-compose build
            - docker-compose up -d app database assets
            - docker exec -t noagenda_app_1 bin/scripts/wait-for-app.sh
            - docker exec -t noagenda_assets_1 yarn run test
            - docker exec -t noagenda_app_1 php bin/phpunit
