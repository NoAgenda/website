<ul class="list-unstyled">
  {% for message in chatMessages %}
  {% set customStyling = '' %}
  {% set isTrollRoom = message.source == constant('App\\Entity\\ChatMessage::SOURCE_TROLL_ROOM') %}
  {% set isAuthor = app.user and app.user.username == message.username %}
  {% if isAuthor %}
    {% set customStyling = 'background: rgba(255, 193, 7, .3);' %}
  {% endif %}
  {% if isTrollRoom %}
    {% set customStyling = 'background: rgba(0, 123, 255, .3);' %}
  {% endif %}
  <li
    class="site-chat-message media py-1"
    style="display: none; {{ customStyling }}"
    data-timestamp="{{ message.postedAt }}"
  >
    <div class="text-right mr-3" style="width: 80px;">
      {{ message.postedAt|prettyTimestamp }}
    </div>
    <div class="media-body">
      <strong>{{ message.username }}</strong>: {{ message.contents|nl2br }}
    </div>
  </li>
  {% endfor %}
</ul>
